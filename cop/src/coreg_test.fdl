#include "coreg.fdl"

dp test_coreg (
    in  old  : ns(32);
    in  curr : ns(32);
    out new  : ns(32);
    out step : ns(1)) {

    always {
        $display($cycle, $dec,
                 " old:", old,
                 " curr:", curr,
                 " new:", new,
                 " step:", step);
    }

    sfg test_0 { new=1; step=1; }
    sfg test_1 { new=2; step=1; }
    sfg test_2 { new=3; step=1; }
    sfg test_3 { new=4; step=1; }
}

sequencer test_coreg_ctrl(test_coreg) {
    test_0;
    test_1;
    test_2;
    test_3;
}

system coreg_sys {
    coreg(new, step, old, curr);
    test_coreg(old, curr, new, step);
}
